function encerrarSessao(){$.ajax({url:"/painel-dlx/login/encerrar-sessao",type:"get",dataType:"json",success:function(e){"sucesso"===e.retorno?window.location="/":alert(e.mensagem)}})}function fecharPopupGerenciarConfiguracoes(){$("#popup-gerenciar-permissoes").fadeOut("fast",function(){$(this).remove(),$(window).off("keyup.__gerenciarPermissoes")})}function popupGerenciarConfiguracoes(e){$("#popup-gerenciar-permissoes").length<1&&$.get("/painel-dlx/grupos-de-usuarios/permissoes",{grupo_usuario_id:e,"pg-mestra":"conteudo-master"},function(e){$(document.createElement("div")).attr("id","popup-gerenciar-permissoes").addClass("popup-modal").html(e).appendTo($("body")),$(window).on("keyup.__gerenciarPermissoes",function(e){27===(e.keycode||e.which)&&fecharPopupGerenciarConfiguracoes()})})}function excluirConfigSmtp(e){return confirm("Deseja realmente excluir essa configuração SMTP?")&&$.ajax({url:"/painel-dlx/config-smtp/excluir-config-smtp",data:{config_smtp_id:e},type:"post",dataType:"json",success:function(e,s,a){msgUsuario.adicionar(e.mensagem,e.retorno,a.id),"sucesso"===e.retorno&&window.location.reload()},mensagem:"Excluindo configuração SMTP.<br>Por favor aguarde..."}),!1}function testarConfigSmtp(e){$.ajax({url:"/painel-dlx/config-smtp/testar",data:e,type:"post",dataType:"json",mensagem:"Enviando email de teste.<br>Por favor aguarde...",success:function(e,s,a){msgUsuario.mostrar(e.mensagem,e.retorno,a.id)}})}function excluirGrupoUsuario(e){return confirm("Deseja realmente excluir esse grupo de usuário?")&&$.ajax({url:"/painel-dlx/grupos-de-usuarios/excluir",type:"post",data:{grupo_usuario_id:e},dataType:"json",mensagem:"Excluindo grupo de usuário.<br>Por favor aguarde...",success:function(e,s,a){if("sucesso"===e.retorno)return msgUsuario.adicionar(e.mensagem,e.retorno,a.id),void window.location.reload();msgUsuario.mostrar(e.mensagem,e.retorno,a.id)}}),!1}function adicionarPermissao(e){$(e).removeAttr("onclick").attr("onclick","retirarPermissao(this)").appendTo($("#lista-permissoes-grupo")).find(":checkbox").prop("checked",!0)}function excluirPermissaoUsuario(e){return confirm("Deseja realmente excluir essa permissão?")&&$.ajax({url:"/painel-dlx/permissoes/excluir-permissao",type:"post",data:{permissao_usuario_id:e},dataType:"json",mensagem:"Excluindo permissão de usuário.<br>Por favor aguarde...",success:function(e,s,a){if("sucesso"===e.retorno)return msgUsuario.adicionar(e.mensagem,e.retorno,a.id),void window.location.reload();msgUsuario.mostrar(e.mensagem,e.retorno,a.id)}}),!1}function retirarPermissao(e){$(e).removeAttr("onclick").attr("onclick","adicionarPermissao(this)").appendTo($("#lista-permissoes-sistema")).find(":checkbox").prop("checked",!1)}function excluirUsuario(e){return confirm("Deseja realmente excluir esse usuário?")&&$.ajax({url:"/painel-dlx/usuarios/excluir-usuario",data:{usuario_id:e},type:"post",dataType:"json",mensagem:"Excluindo usuário.<br>Por favor aguarde...",success:function(e,s,a){"sucesso"===e.retorno&&(msgUsuario.adicionar(e.mensagem,e.retorno,a.id),window.location.reload()),msgUsuario.mostrar(e.mensagem,e.retorno,a.id)}}),!1}$(".menu-lateral-item[data-mostrar-html]").on("click",function(){var e=$(this),s=e.parents(".menu-lateral"),a=[],r=e.data("mostrar-html");e.hasClass("ativo")||(s.find(".menu-lateral-item[data-mostrar-html]").each(function(){a.push($(this).data("mostrar-html"))}),a=a.join(", "),$(a).hide(),$(r).show(),s.find(".menu-lateral-item.ativo").removeClass("ativo"),e.addClass("ativo"))}),$(window).on("load.__widgets",function(){$("[data-widget-url]").each(function(){var e=$(this),s=e.data("widget-url");$.get(s,{"pg-mestra":"conteudo-master"},function(s){e.find(".widget-home-conteudo").html(s)})})});var msgUsuario={msgs:{},init:function(){this.msgs=this.parse()},parse:function(){var e=window.sessionStorage.getItem("ajax-msg")||"{}";return e=JSON.parse(e)},adicionar:function(e,s,a){this.msgs[s]=void 0===this.msgs[s]?[]:this.msgs[s],this.msgs[s].push({mensagem:e,id:a}),this.salvar()},exibirTodas:function(){for(var e in this.msgs)for(var s in this.msgs[e])this.exibir(e,s)},exibir:function(e,s){var a=this.msgs[e][s];this.mostrar(a.mensagem,e,a.id),this.msgs[e].splice(s,1),this.salvar()},salvar:function(){window.sessionStorage.setItem("ajax-msg",JSON.stringify(this.msgs))},mostrar:function(e,s,a){a=a||this.uuid();var r=$("#"+a);if(r.length>0)return r.removeClass("-processando").addClass("-"+s).find(".status-ajax-texto").html(e),!0;var o=$(document.createElement("div")).addClass("status-ajax-msg").addClass("-"+s).attr("id",a).appendTo($("#status-ajax"));return $(document.createElement("a")).addClass("status-ajax-texto").html(e).appendTo(o),$(document.createElement("a")).addClass("status-ajax-fechar").text("x").attr({href:"javascript:",title:"Fechar"}).on("click",function(){$(this).parents(".status-ajax-msg").fadeOut("fast",function(){$(this).remove()})}).appendTo(o),!0},uuid:function(){return"status-ajax-msg-"+Math.random().toString(36).substr(2,16)}};msgUsuario.init(),msgUsuario.exibirTodas(),$.ajaxSetup({global:!0,beforeSend:function(e,s){var a=$(document.activeElement).data("ajax-msg")||s.mensagem||"Carregando, por favor aguarde.";e.id=msgUsuario.uuid(),msgUsuario.mostrar(a,"processando",e.id)},error:function(e){var s="ERRO "+e.status+" - "+e.statusText+": "+e.responseText;msgUsuario.mostrar(s,"erro",e.id)},complete:function(e){window.setTimeout(function(){$("#"+e.id).find(".status-ajax-fechar").trigger("click")},7e3)}});