function irParaPagina(a){var e=window.location.pathname,s=window.location.search;a=a<1?1:a,s?s.indexOf("pg=")<0?s+="&pg="+a:s=s.replace(/pg=\d+/,"pg="+a):s="?pg="+a,window.location.assign(e+s)}function encerrarSessao(){$.ajax({url:"/painel-dlx/login/encerrar-sessao",type:"get",dataType:"json",success:function(a){"sucesso"===a.retorno?window.location="/":msgUsuario.mostrar(a.mensagem)}})}function fecharPopupGerenciarConfiguracoes(){$("#popup-gerenciar-permissoes").fadeOut("fast",function(){$(this).remove(),$(window).off("keyup.__gerenciarPermissoes")})}function popupGerenciarConfiguracoes(a){$("#popup-gerenciar-permissoes").length<1&&$.get("/painel-dlx/grupos-de-usuarios/permissoes",{grupo_usuario_id:a,"pg-mestra":"conteudo-master"},function(a){$(document.createElement("div")).attr("id","popup-gerenciar-permissoes").addClass("popup-modal").html(a).appendTo($("body")),$(window).on("keyup.__gerenciarPermissoes",function(a){27===(a.keycode||a.which)&&fecharPopupGerenciarConfiguracoes()})})}function excluirConfigSmtp(a){return confirm("Deseja realmente excluir essa configuração SMTP?")&&$.ajax({url:"/painel-dlx/config-smtp/excluir-config-smtp",data:{config_smtp_id:a},type:"post",dataType:"json",success:function(a,e,s){msgUsuario.adicionar(a.mensagem,a.retorno,s.id),"sucesso"===a.retorno&&window.location.reload()},mensagem:"Excluindo configuração SMTP.<br>Por favor aguarde..."}),!1}function testarConfigSmtp(a){$.ajax({url:"/painel-dlx/config-smtp/testar",data:a,type:"post",dataType:"json",mensagem:"Enviando email de teste.<br>Por favor aguarde...",success:function(a,e,s){msgUsuario.mostrar(a.mensagem,a.retorno,s.id)}})}function excluirGrupoUsuario(a){return confirm("Deseja realmente excluir esse grupo de usuário?")&&$.ajax({url:"/painel-dlx/grupos-de-usuarios/excluir",type:"post",data:{grupo_usuario_id:a},dataType:"json",mensagem:"Excluindo grupo de usuário.<br>Por favor aguarde...",success:function(a,e,s){if("sucesso"===a.retorno)return msgUsuario.adicionar(a.mensagem,a.retorno,s.id),void window.location.reload();msgUsuario.mostrar(a.mensagem,a.retorno,s.id)}}),!1}function adicionarPermissao(a){$(a).removeAttr("onclick").attr("onclick","retirarPermissao(this)").appendTo($("#lista-permissoes-grupo")).find(":checkbox").prop("checked",!0)}function excluirPermissaoUsuario(a){return confirm("Deseja realmente excluir essa permissão?")&&$.ajax({url:"/painel-dlx/permissoes/excluir-permissao",type:"post",data:{permissao_usuario_id:a},dataType:"json",mensagem:"Excluindo permissão de usuário.<br>Por favor aguarde...",success:function(a,e,s){if("sucesso"===a.retorno)return msgUsuario.adicionar(a.mensagem,a.retorno,s.id),void window.location.reload();msgUsuario.mostrar(a.mensagem,a.retorno,s.id)}}),!1}function retirarPermissao(a){$(a).removeAttr("onclick").attr("onclick","adicionarPermissao(this)").appendTo($("#lista-permissoes-sistema")).find(":checkbox").prop("checked",!1)}function excluirUsuario(a){return confirm("Deseja realmente excluir esse usuário?")&&$.ajax({url:"/painel-dlx/usuarios/excluir-usuario",data:{usuario_id:a},type:"post",dataType:"json",mensagem:"Excluindo usuário.<br>Por favor aguarde...",success:function(a,e,s){"sucesso"===a.retorno&&(msgUsuario.adicionar(a.mensagem,a.retorno,s.id),window.location.reload()),msgUsuario.mostrar(a.mensagem,a.retorno,s.id)}}),!1}var msgUsuario={msgs:{},init:function(){this.msgs=this.parse()},parse:function(){var a=window.sessionStorage.getItem("ajax-msg")||"{}";return a=JSON.parse(a)},adicionar:function(a,e,s){this.msgs[e]=void 0===this.msgs[e]?[]:this.msgs[e],this.msgs[e].push({mensagem:a,id:s}),this.salvar()},exibirTodas:function(){for(var a in this.msgs)for(var e in this.msgs[a])this.exibir(a,e)},exibir:function(a,e){var s=this.msgs[a][e];this.mostrar(s.mensagem,a,s.id),this.msgs[a].splice(e,1),this.salvar()},salvar:function(){window.sessionStorage.setItem("ajax-msg",JSON.stringify(this.msgs))},mostrar:function(a,e,s){s=s||this.uuid();var o=$("#"+s);if(o.length>0)return o.removeClass("-processando").addClass("-"+e).find(".status-ajax-texto").html(a),!0;var r=$(document.createElement("div")).addClass("status-ajax-msg").addClass("-"+e).attr("id",s).appendTo($("#status-ajax"));return $(document.createElement("a")).addClass("status-ajax-texto").html(a).appendTo(r),$(document.createElement("a")).addClass("status-ajax-fechar").text("x").attr({href:"javascript:",title:"Fechar"}).on("click",function(){$(this).parents(".status-ajax-msg").fadeOut("fast",function(){$(this).remove()})}).appendTo(r),!0},fechar:function(a){$("#"+a).fadeOut("fast",function(){$(this).remove()})},uuid:function(){return"status-ajax-msg-"+Math.random().toString(36).substr(2,16)}};msgUsuario.init(),msgUsuario.exibirTodas(),$.ajaxSetup({global:!0,beforeSend:function(a,e){if(!/.(css|js)(\?.+)?$/.test(e.url)){var s=$(document.activeElement).data("ajax-msg")||e.mensagem||"Carregando, por favor aguarde.";a.id=msgUsuario.uuid(),msgUsuario.mostrar(s,"processando",a.id)}},error:function(a){var e="ERRO "+a.status+" - "+a.statusText+": "+a.responseText;msgUsuario.mostrar(e,"erro",a.id)},complete:function(a){window.setTimeout(function(){$("#"+a.id).find(".status-ajax-fechar").trigger("click")},7e3)}}),$(".menu-lateral-item[data-mostrar-html]").on("click",function(){var a=$(this),e=a.parents(".menu-lateral"),s=[],o=a.data("mostrar-html");a.hasClass("ativo")||(e.find(".menu-lateral-item[data-mostrar-html]").each(function(){s.push($(this).data("mostrar-html"))}),s=s.join(", "),$(s).hide(),$(o).show(),e.find(".menu-lateral-item.ativo").removeClass("ativo"),a.addClass("ativo"))}),$(window).on("load.__widgets",function(){$("[data-widget-url]").each(function(){var a=$(this),e=a.data("widget-url");$.ajax({url:e,data:{"pg-mestra":"conteudo-master"},type:"get",dataType:"html",mensagem:"Carregando conteúdo do widget...",success:function(e,s,o){a.find(".widget-home-conteudo").html(e),msgUsuario.fechar(o.id)}})})});