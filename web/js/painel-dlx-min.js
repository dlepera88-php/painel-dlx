function calcDV(a,o){for(var e=o.length,t=0,n,r=0;r<e;r++)t+=o[r]*parseInt(a[r]);return n=t%11,n<2?0:11-n}function validaCPF(a){var o,e,t=[10,9,8,7,6,5,4,3,2],n=[11,10,9,8,7,6,5,4,3,2],r=a.replace(/[^0-9]+/g,"");return o=calcDV(r,t),e=calcDV(r,n),o===parseInt(r[9])&&e===parseInt(r[10])}function validaCNPJ(a){var o,e,t=[5,4,3,2,9,8,7,6,5,4,3,2],n=[6,5,4,3,2,9,8,7,6,5,4,3,2],r=a.replace(/[^0-9]+/g,"");return r.length<14||(o=calcDV(r,t),e=calcDV(r,n),o===parseInt(r[12])&&e===parseInt(r[13]))}function validaEAN(a){var o=[8,13,14];o.indexOf(a.length)<0&&console.warn("O número informado não segue os padrões: GTIN-"+o.join(", GTIN-"));for(var e=0,t,n=parseInt(a.substr(-1)),r=a.length,i=a.length-1,s=3,c=0;c<i;c++)e+=r>13?c%2==0?3*parseInt(a[c]):parseInt(a[c]):c%2==0?parseInt(a[c]):3*parseInt(a[c]);var l=(1e3+e)%10;return(t=0===l?0:10-l)===n}function validaUpload(a){for(var o=a.arq,e=a.exts,t=1024*parseInt(a.max)*1024,n=o.length,r,i,s,c=0;c<n;c++)if(r=o[c],i=r.name.toLowerCase(),s=i.substr(i.indexOf(".",i.length-5)+1),r.size>t||e.indexOf(s)<0)return!1;return!0}function formValidacao(a,o,e){return a?o.setCustomValidity(e):o.validity.valid||o.validationMessage!==e?null:o.setCustomValidity("")}/** @preserve
 * The MIT License (MIT) https://github.com/dlepera88-php/framework-dlx/blob/master/LICENSE
 * Copyright (c) 2017 Diego Lepera http://diegolepera.xyz/
 */
function encerrarSessao(){$.ajax({url:"login/encerrar-sessao",dataType:"json",success:function(a){"-sucesso"===a.tipo?window.location="":mostrarAlerta(a.mensagem,{tipo:a.tipo})}})}function excluirRegistro(a){var o=$(this).parents("form");a=$.extend({mensagem:"Está certo disso?",func_depois:function(){return!0},func_nao:function(){return!0},pk:o.serialize(),url:o.attr("action")},a),"string"==typeof a.func_depois&&(a.func_depois=$.proxy(encontrarFuncaoNS(a.func_depois),this)),solicitarConfirmacao(a.mensagem,function(){if(void 0===a.url)return console.error("[excluirRegistro] É necessário informar a URL para executar a exclusão do registro."),!1;$.ajax({url:a.url,type:"post",data:a.pk,success:function(o){var e=[];try{o=JSON.parse(o),"-sucesso"===o.tipo&&"function"==typeof a.func_depois&&(e=[{funcao:a.func_depois}]),mostrarAlerta(o.mensagem,{tema:"painel-dlx",tipo:o.tipo,botoes:e})}catch(a){mostrarAlerta(o,{tema:"painel-dlx",tipo:"-info"})}}})},function(){return a.func_nao()})}function __abrirModalInterno(a){var o=$(document.createElement("div")).addClass("caixa-modal").html('<p class="teclaesc">Pressione a tecla ESC para fechar.</p>'),e=$(a);if(1!==e.length)return void console.error("[__abrirModalInterno] Objeto não encontrado.");e.clone(!0,!0).addClass("contmodal").css("display","initial").appendTo(o),o.appendTo($("body"))}function __abrirModalExterno(a,o){var e=$(document.createElement("div")).addClass("caixa-modal").html('<p class="teclaesc">Pressione a tecla ESC para fechar.</p>');o=o||"conteudo",$.ajax({url:a+(a.indexOf("?")>-1?"&":"?")+"dlx-mestra="+o,success:function(a){e.html(e.html()+a).find(".dlx-conteudo").addClass("contmodal"),e.appendTo($("body"))}}),e.appendTo($("body"))}function obterOrientacaoIMG(a){var o=a.naturalWidth,e=a.naturalHeight;return e<o?"h":e>o?"v":"q"}adicionarEvento($('[data-acao="excluir-registro"]'),"click.__excluirRegistro",function(){excluirRegistro.apply(this,[$(this).data()])});var listaRegistros={identificarForm:function(a){var o=$(a),e;return e="FORM"===a.tagName?o:o.parents("form").length>0?o.parents("form"):$("form")},excluirLinhasSelecionadas:function(a){a=a||listaRegistros.identificarForm(this),a.find(":checkbox:checked").each(function(){$(this).parents("tr").remove()})},marcarLinhasID:function(a,o,e){if("object"==typeof a)for(var t=a.length,n=0;n<t;n++)listaRegistros.marcarLinhasID(a[n],o);else o=void 0===o||o,e=e||listaRegistros.identificarForm(this),e.length>0?e.find(':checkbox[name^="id"][value="'+a+'"]').prop("checked",o):console.error("[listaRegistros.marcarLinhasID] Formulário não encontrado!")},marcarTodasLinhas:function(a,o){o=o||listaRegistros.identificarForm(this),a=void 0===a||a,o.find(':checkbox[name^="id"]').prop("checked",a)}},formRegistro={registroSalvo:function(a){var o=$(this),e=[];"object"==typeof a?("-sucesso"===a.tipo&&(void 0!==o.data("url-lista")&&e.push({texto:"Lista",funcao:function(){window.location=o.data("url-lista")},params:{class:"botao com-icone -botao -lista"}}),void 0!==o.data("url-detalhes")&&e.push({texto:"Detalhes",funcao:function(){window.location=o.data("url-detalhes").replace(":id",a.id)},params:{class:"botao com-icone -botao -detalhes"}}),void 0!==o.data("url-editar")&&e.push({texto:"Editar",funcao:function(){window.location=o.data("url-editar").replace(":id",a.id)},params:{class:"botao com-icone -botao -editar"}}),void 0!==o.data("url-novo")&&e.push({texto:"Novo",funcao:function(){window.location=o.data("url-novo")},params:{class:"botao com-icone -botao -inserir"}})),mostrarAlerta(a.mensagem,{tipo:a.tipo,tema:"painel-dlx",botoes:e})):mostrarAlerta(a,{tipo:"-info",tema:"painel-dlx"})},registroExcluido:function(){history.back()}};adicionarEvento($('[data-acao="abrir-modal-interno"]'),"click.__abrirModalInterno",function(){__abrirModalInterno.apply(this,[$(this).data("modal-seletor")])}),adicionarEvento($("body"),"keyup.__abrirModalInterno",function(a){27===(a.keycode||a.which)&&$(".caixa-modal").fadeOut("fast",function(){$(this).remove()})}),adicionarEvento($('[data-acao="abrir-modal-externo"]'),"click.__abrirModalExterno",function(){var a=$(this).data();__abrirModalExterno.apply(this,[a["modal-url"],a["modal-mestra"]])}),adicionarEvento($("body"),"keyup.__abrirModalExterno",function(a){27===(a.keycode||a.which)&&$(".caixa-modal").fadeOut("fast",function(){$(this).remove()})}),adicionarEvento($('.previs-imagem [type="file"]'),"change.__previsImagem",function(){var a=$(this),o=a.parents(".previs-imagem"),e=o.find("img"),t=URL.createObjectURL(this.files[0]),n;e.length>0?e.css("display","none").attr("src",t).fadeIn("slow"):e=$(document.createElement("img")).attr("src",t).css("display","none").appendTo(a.parents(".previs-imagem")).fadeIn("slow"),e.on("load.__previsImage",function(){"function"==typeof obterOrientacaoIMG&&(n=obterOrientacaoIMG(this),o.removeClass("-v -h -q"),o.addClass("-"+n))})});