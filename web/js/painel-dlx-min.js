function calcDV(a,e){for(var t=e.length,o=0,n,i=0;i<t;i++)o+=e[i]*parseInt(a[i]);return n=o%11,n<2?0:11-n}function validaCPF(a){var e,t,o=[10,9,8,7,6,5,4,3,2],n=[11,10,9,8,7,6,5,4,3,2],i=a.replace(/[^0-9]+/g,"");return e=calcDV(i,o),t=calcDV(i,n),e===parseInt(i[9])&&t===parseInt(i[10])}function validaCNPJ(a){var e,t,o=[5,4,3,2,9,8,7,6,5,4,3,2],n=[6,5,4,3,2,9,8,7,6,5,4,3,2],i=a.replace(/[^0-9]+/g,"");return i.length<14||(e=calcDV(i,o),t=calcDV(i,n),e===parseInt(i[12])&&t===parseInt(i[13]))}function validaEAN(a){var e=[8,13,14];e.indexOf(a.length)<0&&console.warn("O número informado não segue os padrões: GTIN-"+e.join(", GTIN-"));for(var t=0,o,n=parseInt(a.substr(-1)),i=a.length,r=a.length-1,s=3,c=0;c<r;c++)t+=i>13?c%2==0?3*parseInt(a[c]):parseInt(a[c]):c%2==0?parseInt(a[c]):3*parseInt(a[c]);var l=(1e3+t)%10;return(o=0===l?0:10-l)===n}function validaUpload(a){for(var e=a.arq,t=a.exts,o=1024*parseInt(a.max)*1024,n=e.length,i,r,s,c=0;c<n;c++)if(i=e[c],r=i.name.toLowerCase(),s=r.substr(r.indexOf(".",r.length-5)+1),i.size>o||t.indexOf(s)<0)return!1;return!0}function formValidacao(a,e,t){return a?e.setCustomValidity(t):e.validity.valid||e.validationMessage!==t?null:e.setCustomValidity("")}/** @preserve
 * The MIT License (MIT) https://github.com/dlepera88-php/framework-dlx/blob/master/LICENSE
 * Copyright (c) 2017 Diego Lepera http://diegolepera.xyz/
 */
function encerrarSessao(){$.ajax({url:"login/encerrar-sessao",dataType:"json",success:function(a){"-sucesso"===a.tipo?window.location="":mostrarAlerta(a.mensagem,{tipo:a.tipo})}})}function excluirRegistro(a){var e=$(this).parents("form");a=$.extend({mensagem:"Está certo disso?",func_depois:function(){return!0},func_nao:function(){return!0},pk:e.serialize(),url:e.attr("action")},a),"string"==typeof a.func_depois&&(a.func_depois=$.proxy(encontrarFuncaoNS(a.func_depois),this)),solicitarConfirmacao(a.mensagem,function(){if(void 0===a.url)return console.error("[excluirRegistro] É necessário informar a URL para executar a exclusão do registro."),!1;$.ajax({url:a.url,type:"post",data:a.pk,success:function(e){var t=[];try{e=JSON.parse(e),"-sucesso"===e.tipo&&"function"==typeof a.func_depois&&(t=[{funcao:a.func_depois}]),mostrarAlerta(e.mensagem,{tema:"painel-dlx",tipo:e.tipo,botoes:t})}catch(a){mostrarAlerta(e,{tema:"painel-dlx",tipo:"-info"})}}})},function(){return a.func_nao()})}function __abrirModalInterno(a){var e=$(document.createElement("div")).addClass("caixa-modal").html('<p class="teclaesc">Pressione a tecla ESC para fechar.</p>'),t=$(a);if(1!==t.length)return void console.error("[__abrirModalInterno] Objeto não encontrado.");t.clone(!0,!0).addClass("contmodal").css("display","initial").appendTo(e),e.appendTo($("body"))}function __abrirModalExterno(a,e){var t=$(document.createElement("div")).addClass("caixa-modal").html('<p class="teclaesc">Pressione a tecla ESC para fechar.</p>');e=e||"conteudo",$.ajax({url:a+(a.indexOf("?")>-1?"&":"?")+"dlx-mestra="+e,success:function(a){t.html(t.html()+a).find(".dlx-conteudo").addClass("contmodal"),t.appendTo($("body"))}}),t.appendTo($("body"))}"undefined"!=typeof CKEDITOR&&(CKEDITOR.disableAutoInline=!0,CKEDITOR.stylesSet.add("default",[{name:"Título 1",element:"h1",attributes:{class:"titulo-h1"}},{name:"Título 2",element:"h2",attributes:{class:"titulo-h2"}}]),CKEDITOR.config.coreStyles_bold={element:"b"},CKEDITOR.config.extraPlugins="lineutils,notification,notificationaggregator,widget,widgetselection,popup",$('[data-ckeditor="true"]').each(function(){var a=$(this),e=this.id;CKEDITOR.replace(e,a.data()),a.parents("form").on("submit.__ckeditor",function(){a.val($("#cke_"+e).find("iframe").contents().find("[contenteditable]").html())})})),adicionarEvento($('[data-acao="excluir-registro"]'),"click.__excluirRegistro",function(){excluirRegistro.apply(this,[$(this).data()])});var listaRegistros={identificarForm:function(a){var e=$(a),t;return t="FORM"===a.tagName?e:e.parents("form").length>0?e.parents("form"):$("form")},excluirLinhasSelecionadas:function(a){a=a||listaRegistros.identificarForm(this),a.find(":checkbox:checked").each(function(){$(this).parents("tr").remove()})},marcarLinhasID:function(a,e,t){if("object"==typeof a)for(var o=a.length,n=0;n<o;n++)listaRegistros.marcarLinhasID(a[n],e);else e=void 0===e||e,t=t||listaRegistros.identificarForm(this),t.length>0?t.find(':checkbox[name^="id"][value="'+a+'"]').prop("checked",e):console.error("[listaRegistros.marcarLinhasID] Formulário não encontrado!")},marcarTodasLinhas:function(a,e){e=e||listaRegistros.identificarForm(this),a=void 0===a||a,e.find(':checkbox[name^="id"]').prop("checked",a)}},formRegistro={registroSalvo:function(a){var e=$(this),t=[];"object"==typeof a?("-sucesso"===a.tipo&&(void 0!==e.data("url-lista")&&t.push({texto:"Lista",funcao:function(){window.location=e.data("url-lista")},params:{class:"botao com-icone -botao -lista"}}),void 0!==e.data("url-detalhes")&&t.push({texto:"Detalhes",funcao:function(){window.location=e.data("url-detalhes").replace(":id",a.id)},params:{class:"botao com-icone -botao -detalhes"}}),void 0!==e.data("url-editar")&&t.push({texto:"Editar",funcao:function(){window.location=e.data("url-editar").replace(":id",a.id)},params:{class:"botao com-icone -botao -editar"}}),void 0!==e.data("url-novo")&&t.push({texto:"Novo",funcao:function(){window.location=e.data("url-novo")},params:{class:"botao com-icone -botao -inserir"}})),mostrarAlerta(a.mensagem,{tipo:a.tipo,tema:"painel-dlx",botoes:t})):mostrarAlerta(a,{tipo:"-info",tema:"painel-dlx"})},registroExcluido:function(){history.back()}};adicionarEvento($('[data-acao="abrir-modal-interno"]'),"click.__abrirModalInterno",function(){__abrirModalInterno.apply(this,[$(this).data("modal-seletor")])}),adicionarEvento($("body"),"keyup.__abrirModalInterno",function(a){27===(a.keycode||a.which)&&$(".caixa-modal").fadeOut("fast",function(){$(this).remove()})}),adicionarEvento($('[data-acao="abrir-modal-externo"]'),"click.__abrirModalExterno",function(){var a=$(this).data();__abrirModalExterno.apply(this,[a["modal-url"],a["modal-mestra"]])}),adicionarEvento($("body"),"keyup.__abrirModalExterno",function(a){27===(a.keycode||a.which)&&$(".caixa-modal").fadeOut("fast",function(){$(this).remove()})}),adicionarEvento($('.previs-imagem [type="file"]'),"change.__previsImagem",function(){var a=$(this),e=a.parents(".previs-imagem"),t=e.find("img"),o=URL.createObjectURL(this.files[0]),n;t.length>0?t.css("display","none").attr("src",o).fadeIn("slow"):t=$(document.createElement("img")).attr("src",o).css("display","none").appendTo(a.parents(".previs-imagem")).fadeIn("slow"),t.on("load.__previsImage",function(){"function"==typeof obterOrientacaoIMG&&(n=obterOrientacaoIMG(this),e.removeClass("-v -h -q"),e.addClass("-"+n))})});